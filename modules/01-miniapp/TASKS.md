# 01-miniapp 任务看板

> 目标：先用 Mock 跑通最小闭环，再逐步替换为真实 API 并完善业务功能。

## 0.1 本模块负责范围（关键词）
- `miniprogram`, `ui`, `router`, `tabbar`, `svip`, `paywall`, `course`, `question-bank`

## 0. 约束
- [ ] 仅修改 `modules/01-miniapp/**` 内文件
- [ ] 跨模块需求写入 `modules/99-hub/REQUESTS.md`

## 1. MVP（最小可用）
- [ ] 安装并配置微信开发者工具，导入 `modules/01-miniapp/miniprogram`
- [ ] 确认 Mock 模式可运行（`config/index.js`：`USE_MOCK: true`）
- [ ] 首页 → 题库列表 → 练习模式：可进入、可做题、可展示答案/解析
- [ ] 首页 → 考试模式：可随机抽题、倒计时、交卷到结果页
- [ ] 错题：做错后写入本地 storage；错题页可回看
- [ ] 收藏：收藏/取消收藏（先本地 storage）
- [ ] 我的：授权登录（先本地保存 userInfo），能展示基础信息

## 2. 需求对齐（来自《需求规格说明书》）
> 核心三大主页面：`题库`、`课程`、`我的`。权限控制：SVIP 码（机构学生）+ 付费套餐（非机构学生）。

### 2.1 题库页（强制）
- [ ] 顶部轮播：后台可配置；支持自动/手动切换 + 指示器
- [ ] 年级段入口：`初中` / `单招`
- [ ] 初中：年级（初一/初二/初三）→ 上下册 → 科目（语数英物化，按进度隐藏）→ 单元列表
- [ ] 单招：信息技术/通用技术/音乐鉴赏/美术鉴赏/劳动技术 → 题型（选择/判断/论述）
- [ ] 单元资源入口：`同步试题(预览)` + `在线做题(练习/测评)`

### 2.2 课程页（强制）
- [ ] 与题库同结构筛选：学段/年级/科目/单元
- [ ] 列表展示：封面/标题/简介/时长/观看进度
- [ ] 播放页：续播（记录上次位置）；支持“已学/未学”
- [ ] 权限：非会员仅看封面与简介；会员/SVIP 可观看（下载后置）

### 2.3 我的页（强制）
- [ ] SVIP 码绑定入口：每人限绑 1 次；错误提示（无效/过期/已被绑定）
- [ ] 付费开通入口：未绑定 SVIP 且未付费时，点击资源弹付费提示
- [ ] 学习记录：视频进度 + 做题记录（时间/得分/正确率）
- [ ] 账号设置：头像/昵称；意见反馈（文本+图片上传）
- [ ] 会员中心：状态/有效期/续费入口（后置）

## 3. UI 参考（根目录 `图片/*.jpg`）
> 只参考结构/信息密度；视觉由本模块自行设计但要保持一致。
- [ ] 首页：顶部 banner + 快捷入口（题库练习/错题/收藏/题目搜索）+ 最新题库/新闻资讯模块
- [ ] 题库：顶部 4 个快捷入口 + 两个分区（章节练习/真题练习）+ 列表卡片（进度/正确率/VIP）
- [ ] 错题集：空状态与入口卡片（“题库错题/个人错题”）
- [ ] 我的：顶部身份区 + 激活码/已开通科目卡片 + 功能列表
- [ ] 资讯：列表 + 详情（后置）

## 3. API 接入（依赖 99-hub 的接口契约）
- [ ] 新增 `utils/api/*`（或在 `utils/util.js` 内收敛）：替换 Mock 数据为 `API_BASE_URL`
- [ ] 登录：`wx.login` → 后端换取 token/session；本地缓存并自动续期
- [ ] 题库：分类/题库包/章节拉取；题目分页/抽题接口
- [ ] 作答：提交作答记录；获取进度/正确率
- [ ] 错题/收藏：由本地迁移到服务端
- [ ] VIP/激活码：领取/校验、已开通科目展示

## 4. 质量与发布
- [ ] 统一错误提示与 loading（避免散落）
- [ ] 域名白名单、上传/下载域名配置（同步到 `ENVIRONMENT.md`）
- [ ] 体验版发布流程文档（给客户验收用）

## 5. 并行派单（给各 CIL 窗口）
> 每个窗口只改 `modules/01-miniapp/**`，并尽量分开文件，避免冲突。
- [ ] 窗口 A：`tabBar/路由/权限拦截`（只改 `miniprogram/app.json` + 路由入口）
- [ ] 窗口 B：`题库页/分类树`（只改 `miniprogram/pages/library/**` 与新增的选择器页）
- [ ] 窗口 C：`课程页/播放/进度`（新增 `miniprogram/pages/course/**`，实现续播与进度）
- [ ] 窗口 D：`我的页/SVIP 绑定/付费入口 UI`（只改 `miniprogram/pages/my/**` + 新增 `svip` 页）

